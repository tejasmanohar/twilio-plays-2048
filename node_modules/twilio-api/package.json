{
  "author": {
    "name": "Blake Miner",
    "email": "miner.blake@gmail.com",
    "url": "http://www.blakeminer.com/"
  },
  "contributors": [
    {
      "name": "Jacob Williams",
      "email": "jacob@iakob.com",
      "url": "http://iakob.com/"
    }
  ],
  "name": "twilio-api",
  "description": "Add voice and SMS messaging capabilities to your Node.JS applications with node-twilio-api - a  high-level Twilio helper library to make Twilio API requests, handle incoming requests, and generate TwiML",
  "version": "0.3.3",
  "homepage": "https://github.com/bminer/node-twilio-api/",
  "repository": {
    "type": "git",
    "url": "git://github.com/bminer/node-twilio-api.git"
  },
  "main": "./lib",
  "scripts": {
    "test": "NODE_ENV=development nodeunit ./test"
  },
  "engines": {
    "node": ">=0.4"
  },
  "dependencies": {
    "express": ">=3.0"
  },
  "devDependencies": {
    "nodeunit": ">=0.6.4"
  },
  "optionalDependencies": {
    "express": ">=3.0"
  },
  "readme": "Add voice and SMS messaging capabilities to your Node.JS applications with node-twilio-api!\n\n# node-twilio-api\n\nA high-level Twilio helper library to make Twilio API requests, handle incoming requests,\nand generate TwiML.\n\nAlso ships with Connect/Express middleware to handle incoming Twilio requests.\n\n**IMPORTANT**: You will need a Twilio account to get started (it's not free). [Click here to sign up for \nan account](https://www.twilio.com/try-twilio)\n\n## Install\n\nProject Status: Stable\n\n`npm install twilio-api`\n\nThis project is rather stable. Both placing and receiving calls works rather well.\nYou can also send/receive SMS messages. For anything else, see the docs below to see if your\nfeature is supported.\n\n## Features and Library Overview\n\n - [Create Twilio client](#createClient)\n - [Manage accounts and subaccounts](#manageAccts)\n - [List available local and toll-free numbers](#listNumbers)\n - [Manage Twilio applications](#applications)\n - [Place calls](#placingCalls)\n - [Receive calls](#incomingCallEvent)\n - [List calls and modify live calls](#listAndModifyCalls)\n - [Generate TwiML responses](#generatingTwiML) without writing any XML (I don't like XML).\n - [Conferences, Briding Calls, etc](#joinConference)\n - [Send SMS Messages](#send-sms-messages)\n - [Receive SMS Messages](#incomingSMSMessageEvent)\n - [List and Manage SMS Messages](#list-and-manage-sms-messages)\n - [Built-in pagination with ListIterator Object](#listIterator)\n\n## Todo\n\n - List and manage valid outgoing phone numbers\n - List and provision incoming phone numbers\n - Support for Twilio Connect Applications\n - List and manage conferences, conference details, and participants\n - List SMS short codes and details\n - Respond to fallback URLs\n - Better scalability with multiple Node instances\n\t- An idea for this is to intercept incoming Twilio requests only if the message is for\n\tthat specific instance. Perhaps use URL namespacing or cookies for this?\n - Access recordings, transcriptions, and notifications *(Support is limited at this time)*\n\n## Basic Usage\n\n1. Create a Client using your Account SID and Auth Token.\n2. Load or create a Twilio application and point the VoiceUrl, SmsUrl, etc. to your Node.JS server.\n3. Add the `client.middleware()` to your Express/Connect stack. Start your server.\n\tCall `app.register()` to register your application with the middleware.\n4. Use `app.makeCall` to place calls\n5. Use `app.on('incomingCall', function(call) {...} );` to handle inbound calls.\n6. Generate TwiML by calling methods on the Call object directly.\n\n```javascript\nvar express = require('express'),\n    app = express.createServer();\nvar twilioAPI = require('twilio-api'),\n\tcli = new twilioAPI.Client(ACCOUNT_SID, AUTH_TOKEN);\napp.use(cli.middleware() );\napp.listen(PORT_NUMBER);\n//Get a Twilio application and register it\ncli.account.getApplication(APPLICATION_SID, function(err, app) {\n\tif(err) throw err;\n\tapp.register();\n\tapp.on('incomingCall', function(call) {\n\t\t//Use the Call object to generate TwiML\n\t\tcall.say(\"This is a test. Goodbye!\");\n\t});\n\tapp.makeCall(\"+12225551234\", \"+13335551234\", function(err, call) {\n\t\tif(err) throw err;\n\t\tcall.on('connected', function(status) {\n\t\t\t//Called when the caller picks up\n\t\t\tcall.say(\"This is a test. Goodbye!\");\n\t\t});\n\t\tcall.on('ended', function(status, duration) {\n\t\t\t//Called when the call ends\n\t\t});\n\t});\n});\n/*\n... more sample code coming soon...\nFor now, check the /tests folder\n*/\n```\n\n## API\n\nThe detailed documentation for twilio-api follows.\n\n#### <a name=\"createClient\"></a>Create Twilio client\n\nEasy enough...\n\n```javascript\nvar twilioAPI = require('twilio-api');\nvar cli = new twilioAPI.Client(AccountSid, AuthToken);\n```\n\n#### <a name=\"middleware\"></a>Create Express middleware\n\n- `Client.middleware()` - Returns Connect/Express middleware that handles any request for \n*registered applications*. A registered application will then handle the request accordingly if\nthe method (GET/POST) and URL path of the request matches the application's VoiceUrl,\nStatusCallback, SmsUrl, or SmsStatusCallback.\n\nCould this be much easier?\n\n```javascript\nvar express = require('express'),\n    app = express.createServer();\nvar twilioAPI = require('twilio-api'),\n\tcli = new twilioAPI.Client(AccountSid, AuthToken);\n//OK... good so far. Now tell twilio-api to intercept incoming HTTP requests.\napp.use(cli.middleware() );\n//OK... now we need to register a Twilio application\ncli.account.getApplication(ApplicationSid, function(err, app) {\n\tif(err) throw err; //Maybe do something else with the error instead of throwing?\n\t\n\t/* The following line tells Twilio to look at the URL path of incoming HTTP requests\n\tand pass those requests to the application if it matches the application's VoiceUrl/VoiceMethod,\n\tSmsUrl/SmsMethod, etc. As of right now, you need to create a Twilio application to use the\n\tExpress middleware. */\n\tapp.register();\n});\n```\n\nOh, yes.  The middleware also uses your Twilio AuthToken to validate incoming requests,\n[as described here](http://www.twilio.com/docs/security#validating-requests). If your server is\nrunning behind an HTTPS proxy, be sure that `req.protocol` contains the appropriate protocol. If\nusing Express 3.0, set the \"trust proxy\" option to ensure that `req.protocol` is populated with\nthe value in the `X-Forwarded-Proto` header.  For more information, checkout the\n[`req.protocol` property](http://expressjs.com/api.html#req.protocol).\n\n#### <a name=\"manageAccts\"></a>Manage accounts and subaccounts\n\n- `Client.account` - the main Account Object\n- `Client.getAccount(Sid, cb)` - Get an Account by Sid. The Account Object is passed to the callback\n\t`cb(err, account)`\n- `Client.createSubAccount([FriendlyName,] cb)` Create a subaccount, where callback is `cb(err, account)`\n- `Client.listAccounts([filters,] cb)` - List accounts and subaccounts using the specified `filters`,\n\twhere callback is `cb(err, li)` and `li` is a ListIterator Object.\n\t`filters` may include 'FriendlyName' and/or 'Status' properties.\n- `Account.load([cb])` - Load the Account details from Twilio, where callback is `cb(err, account)`\n- `Account.save([cb])` - Save the Account details to Twilio, where callback is `cb(err, account)`\n- `Account.closeAccount([cb])` - Permanently close this account, where callback is `cb(err, account)`\n- `Account.suspendAccount([cb])` - Suspend this account, where callback is `cb(err, account)`\n- `Account.activateAccount([cb])` - Re-activate a suspended account, where callback is `cb(err, account)`\n\n#### <a name=\"listNumbers\"></a>List available local and toll-free numbers\n\n- `Account.listAvailableLocalNumbers(countryCode, [filters,] cb)` - List available local telephone\nnumbers in your `countryCode` available for provisioning using the provided `filters` Object.\nSee [Twilio's documentation](http://www.twilio.com/docs/api/rest/available-phone-numbers#local)\nfor what filters you can apply. `cb(err, li)` where `li` is a ListIterator.\n- `Account.listAvailableTollFreeNumbers(countryCode, [filters,] cb)` - List available toll-free\nnumbers in your `countryCode` available for provision using the provided `filters` Object.\nSee [Twilio's documentation](http://www.twilio.com/docs/api/rest/available-phone-numbers#toll-free)\nfor what filters you can apply. `cb(err, li)` where `li` is a ListIterator.\n\n#### <a name=\"applications\"></a>Applications\n\n- `Account.getApplication(Sid, cb)` - Get an Application by Sid. The Application Object is passed to\n\tthe callback `cb(err, app)`\n- `Account.createApplication(voiceUrl, voiceMethod, statusCb, statusCbMethod,\n\tsmsUrl, smsMethod, smsStatusCb, [friendlyName], cb)` - Creates an Application with\n\t\t`friendlyName`, where callback is `cb(err, app)`\n\t\tThe `VoiceUrl`, `voiceMethod` and other required arguments are used to intercept incoming\n\t\trequests from Twilio using the provided Connect middleware. These URLs should point to the same\n\t\tserver instance as the one running, and you should ensure that they do not interfere with\n\t\tthe namespace of your web application.\n\t\t**CAUTION: It is highly recommended that you use 'POST' as the method for all requests;\n\t\totherwise, strange behavior may occur.**\n- `Account.listApplications([filters,] cb)` - List applications associated with this Account.\n\t`filters` may include a 'FriendlyName' property. Callback is of the form: `cb(err, li)`\n- `Application.load([cb])`\n- `Application.save([cb])`\n- `Application.remove([cb])` - Permanently deletes this Application from Twilio, where callback\n\tis `cb(err, success)` and `success` is a boolean.\n- `Application.register()` - Registers this application to intercept the appropriate HTTP requests\n\tusing the [Connect/Express middleware](#middleware). The application must provide a VoiceUrl,\n\tVoiceMethod, StatusCallback, StatusCallbackMethod, SmsUrl, SmsMethod, and SmsStatusCallback;\n\totherwise, an exception will be thrown.\n- `Application.unregister()` - Unregisters this application. This happens automatically if the\n\tapplication is deleted.\n\nA valid application must have a VoiceUrl, VoiceMethod, StatusCallback, StatusCallbackMethod,\nSmsUrl, SmsMethod, and SmsStatusCallback.  Fallback URLs are ignored at this time.\n\n#### <a name=\"placingCalls\"></a>Placing Calls\n\n- `Application.makeCall(from, to, [options, cb])` - Place a call and call the callback once the\n\tcall is queued. If your application is registered, but your VoiceUrl is not set to the same\n\tserver, the callee will likely receive an error message, and a debug error will be logged on\n\tyour account. For example, if your server is running at www.example.com, please ensure that\n\tyour VoiceUrl is something like: http://www.example.com/twilio/voice\n\tAlso, be sure that your VoiceUrl protocol matches your protocol (HTTP vs. HTTPS).\n\t\n`from` is the phone number or client identifier to use as the caller id. If using a phone number,\n\tit must be a Twilio number or a verified outgoing caller id for your account.\n\n`to` is the phone number or client identifier to call.\n\n`options` is an object containing any of these additional properties:\n\t\n- sendDigits - A string of keys to dial after connecting to the number. Valid digits in the string\n\tinclude: any digit (0-9), '#', '*' and 'w' (to insert a half second pause).\n- ifMachine - Tell Twilio to try and determine if a machine (like voicemail) or a human has answered\n\tthe call. Possible values are 'Continue', 'Hangup', and null (the default).\n\tAnswering machine detection is an experimental feature, and support is limited. The downside of\n\ttrying to detect a machine is that Twilio needs to listen to the first few seconds of audio after\n\tconnecting a call. This usually results in a few seconds of delay before Twilio begins processing\n\tTwiML. If your application does not care about the human vs. machine distinction, then omit the\n\t'ifMachine' option, and Twilio will perform no such analysis.\n- timeout - The integer number of seconds that Twilio should allow the phone to ring before assuming\n\tthere is no answer. Default is 60 seconds, the maximum is 999 seconds.\n\n`cb` - Callback of the form `cb(err, call)`. This is called as soon as the call is queued, *not when\n\tthe call is connected*.\n\tYou can being building your TwiML response in the context of this callback, or you can listen for\n\tthe various events on the Call Object.\n\nPhone numbers should be formatted with a '+' and country code e.g., +16175551212 (E.164 format).\n\n#### <a name=\"listAndModifyCalls\"></a>List Calls and Modify Live Calls\n\n- `Application.listCalls([filters,] cb)` - Lists live and completed calls associated with an Account.\n\tNote: you must call Application.listCalls, not Account.listCalls.  This is a side-effect\n\tcaused by the Application and Call being very inter-related.\n\tRefer to the [Twilio Documentation](http://www.twilio.com/docs/api/rest/call#list-get) to see\n\twhat `filters` you can use. Again, callback is of the form: `cb(err, li)`.\n- `Call.load([cb])`\n- `Call.save([cb])`\n- `Call.liveCancel([cb])` - will attempt to hangup this call if it is queued or ringing, but not\n\taffect the call if it is already in progress.\n- `Call.liveHangUp([cb])` - will attempt to hang up this call even if it's already in progress.\n- `Call.liveRedirect(url, method)` - Transfers control of this call **immediately** to the TwiML at\n\tthe specified URL. Note: this is quite different from `Call.redirect`, which should be used when TwiML\n\tis being served to Twilio.\n- `Call.liveCb(cb)` - Will use the `Call.liveRedirect` function to **immediately** re-route control to\n\tthe specified callback function, `cb`. The `cb` must be of the form `cb(err, call)`. Please\n\tensure that the Call is associated with a registered application for this to work properly.\n\n#### <a name=\"generatingTwiML\"></a>Generating TwiML\n\nGenerating TwiML is as simple as calling methods on the Call Object.  To make things simple, you\ncannot generate TwiML for SMS requests, only voice requests.\n\nLet's look at an example of placing and handling an outbound call:\n\n```javascript\n/* Make sure that you have already setup your Twilio client, loaded and registered a valid application,\n\tand started your server. Twilio must be able to contact your server for this to work. Ensure that your\n\tserver is running, proper ports are open on your firewall, etc.\n*/\napp.makeCall(\"+16145555555\", \"+16145558888\", function(err, call) {\n\tif(err) throw err;\n\t//Now we can use the call Object to generate TwiML and listen for Call events\n\tcall.on('connected', function(status) {\n\t\t/* This is called as soon as the call is connected to 16145558888 (when they answer)\n\t\t\tNote: status is probably 'in-progress' at this point.\n\t\t\tNow we generate TwiML for this call... which will served up to Twilio when the\n\t\t\tcall is connected.\n\t\t*/\n\t\tcall.say(\"Hello. This is a test of the Twilio API.\");\n\t\tcall.pause();\n\t\tvar gather = call.gather(function(call, digits) {\n\t\t\tcall.say(\"You pressed \" + digits + \".\");\n\t\t\tvar str = \"Congratulations! You just used Node Twilio API to place an outgoing call.\";\n\t\t\tcall.say(str, {'voice': 'man', 'language': 'en'});\n\t\t\tcall.pause();\n\t\t\tcall.say(str, {'voice': 'man', 'language': 'en-gb'});\n\t\t\tcall.pause();\n\t\t\tcall.say(str, {'voice': 'woman', 'language': 'en'});\n\t\t\tcall.pause();\n\t\t\tcall.say(str, {'voice': 'woman', 'language': 'en-gb'});\n\t\t\tcall.pause();\n\t\t\tcall.say(\"Goodbye!\");\n\t\t}, {\n\t\t\t'timeout': 10,\n\t\t\t'numDigits': 1\n\t\t});\n\t\tgather.say(\"Please press any key to continue. You may press 1, 2, 3, 4, 5, 6, 7, 8, 9, or 0.\");\n\t\tcall.say(\"I'm sorry. I did not hear your response. Goodbye!\");\n\t});\n\tcall.on('ended', function(status, duration) {\n\t\t/* This is called when the call ends and the StatusCallback is called.\n\t\t\tNote: status is probably 'completed' at this point. */\n\t});\n});\n```\n\n### CAUTION: COMMON PITFALL:\n\nDO NOT DO THE FOLLOWING:\n\n```javascript\napp.makeCall(\"+16145555555\", \"+16145558888\", function(err, call) {\n\tif(err) throw err;\n\t//Now we can use the call Object to generate TwiML and listen for Call events\n\tcall.on('connected', function(status) {\n\t\t//Using an asyncronous function call -- INCORRECT: this will not work as expected!\n\t\tfs.readFile('greeting.txt', function(err, data) {\n\t\t\tif(err) throw err;\n\t\t\tcall.say(data); //At this point, the 'connected' event handler has already been executed\n\t\t});\n\t\t/* At this point, no TwiML has been generated yet, and we must serve something to Twilio.\n\t\t\tSo, we serve an empty TwiML document.\n\t\t*/\n\t});\n});\n```\n\nNotice that the 'connected' event completes before the file has been read. This means that Twilio\nhas already requested and received the TwiML for the call. The call will be answered by Twilio\nand then immediately hung up (since no TwiML is provided).\n\nNote: The above code will work, but your generated TwiML will not be executed until another Call event\nis triggered.\n\nSee the [Common Pitfalls](https://github.com/bminer/node-twilio-api/wiki/Common-Pitfalls)\npage on the wiki for futher details and solutions.\n\n#### Here are all of the TwiML-generating functions you can call:\n\n - `Call.say(text[, options])` - Reads `text` to the caller using text to speech. Options include:\n\t- `voice` - 'man' or 'woman' (default: 'man')\n\t- `language` - allows you pick a voice with a specific language's accent and pronunciations.\n\t\tAllowed values: 'en', 'en-gb', 'es', 'fs', 'de' (default: 'en')\n\t- `loop` - specifies how many times you'd like the text repeated. The default is once.\n\t\tSpecifying '0' will cause the &lt;Say&gt; verb to loop until the call is hung up.\n - `Call.play(audioUrl[, options])` - plays an audio file back to the caller. Twilio retrieves the\n\tfile from a URL (`audioUrl`) that you provide. Options include:\n\t- `loop` - specifies how many times the audio file is played. The default behavior is to play the\n\t\taudio once. Specifying '0' will cause the the &lt;Play&gt; verb to loop until the call is hung up.\n - `Call.pause([duration])`\t- waits silently for a `duration` seconds. If &lt;Pause&gt; is the first\n\tverb in a TwiML document, Twilio will wait the specified number of seconds before picking up the call.\n - `Call.gather(cbIfInput[, options, cbIfNoInput])` - Gathers input from the telephone user's keypad.\n\tCalls `cbIfInput` once the user provides input, passing the Call object as the first argument and\n\tthe input provided as the second argument. If the user does not provide valid input in a timely\n\tmanner, `cbIfNoInput` is called if it was provided; otherwise, the next TwiML instruction will\n\tbe executed.  Options include:\n\t- `timeout` - The limit in seconds that Twilio will wait for the caller to press another digit\n\t\tbefore moving on. Twilio waits until completing the execution of all nested verbs before\n\t\tbeginning the timeout period. (default: 5 seconds)\n\t- `finishOnKey` - When this key is pressed, Twilio assumes that input gathering is complete. For\n\t\texample, if you set 'finishOnKey' to '#' and the user enters '1234#', Twilio will\n\t\timmediately stop waiting for more input when the '#' is received and will call\n\t\t`cbIfInput`, passing the call Object as the first argument and the string \"1234\" as the second.\n\t\tThe allowed values are the digits 0-9, '#' , '*' and the empty string (set 'finishOnKey' to '').\n\t\tIf the empty string is used, &lt;Gather&gt; captures all input and no key will end the\n\t\t&lt;Gather&gt; when\tpressed. (default: #)\n\t- `numDigits` - the number of digits you are expecting, and calls `cbIfInput` once the caller\n\t\tenters that number of digits.\n\tThe `Call.gather()` function returns a Gather Object with methods: `say()`, `play()`, and `pause()`,\n\tallowing you to nest those verbs within the &lt;Gather&gt; verb.\n - `Call.record(cb[, options, cbIfEmptyRecording])` - records the caller's voice and returns to you the\n\tURL of a file containing the audio recording. Callback is called when the recording is complete\n\tand should be of the form: `cb(call, recordingUrl, recordingDuration, input)` where `call`\n\tis the Call object, `recordingUrl` is the URL that can be fetched to retrieve the recording,\n\t`recordingDuration` is the duration of the recording, and `input` is the key (if any) pressed\n\tto end the recording, or the string 'hangup' if the caller hung up. If the user does not speak\n\tduring the recording, `cbIfEmptyRecording` is called if it was provided; otherwise, the next\n\tTwiML instruction will be executed.\n\tOptions include:\n\t- `timeout` - tells Twilio to end the recording after a number of seconds of silence has\n\t\tpassed. The default is 5 seconds.\n\t- `finishOnKey` - a set of digits that end the recording when entered. The allowed values are the\n\t\tdigits 0-9, '#' and '*'. The default is '1234567890*#' (i.e. any key will end the recording).\n\t- `maxLength` - the maximum length for the recording in seconds. This defaults to 3600 seconds\n\t\t(one hour) for a normal recording and 120 seconds (two minutes) for a transcribed recording.\n\t- `transcribe` - tells Twilio that you would like a text representation of the audio of the recording.\n\t\tTwilio will pass this recording to our speech-to-text engine and attempt to convert the audio\n\t\tto human readable text. The 'transcribe' option is off by default. If you do not wish to\n\t\tperform transcription, simply do not include the transcribe attribute.\n\t\t**Transcription is a pay feature.** If you include a 'transcribe' or 'transcribeCallback'\n\t\toption, your account will be charged. See the pricing page for Twilio transcription prices.\n\t- `transcribeCallback` - a function that will be called when the transcription is complete.\n\t\tCallback should be of the form: `cb(call, transcriptionStatus, transcriptionText,\n\t\ttranscriptionUrl, recordingUrl)`. TwiML generated on the Call object will not be executed until\n\t\tlater because a transcribeCallback does not affect the call flow.\n\t- `playBeep` - play a sound before the start of a recording. If you set the value\n\t\tto 'false', no beep sound will be played. Defaults to true.\n - `Call.sms` - Not implemented, and probably will never be implemented. You can use\n\t`Application.sendSMS` to send SMS messages.\n<a name=\"joinConference\"></a>\n - `Call.joinConference([roomName, option, cbOnEnd])` - connects the call to a conference room. If\n\t`roomName` is not specified, the caller will be placed into a uniquely named, empty conference room.\n\tThe name of the conference room into which the call is placed is returned by this function.\n\t`cbOnEnd` will be called when the call ends, if it is specified; otherwise, the next TwiML\n\tinstruction will be executed when this conference ends. `cbOnEnd` should be of the form:\n\t`cb(call, status)`.  Please keep in mind that conferences do not start until at least two\n\tparticipants join; in the meantime, the caller must wait. In addition, a conference does not end\n\tuntil all callers drop out. This means that there are only a few ways to end a conference:\n\t\n\t- You press * and `leaveOnStar` is set.\n\t- `timeLimit` expires.\n\t- Someone leaves who had `endConferenceOnExit` set.\n\t- You end the conference manually using one of the `Conference` Object methods.\n\t\n\tOptions include:\n\t\n\t- `leaveOnStar` - lets the calling party leave the conference room if '*' is pressed on the caller's\n\t\tkeypad. Defaults to false.\n\t- `timeLimit` - the maximum duration of the conference in seconds.  By default, there is a four hour\n\t\ttime limit set on calls.\n\t- `muted` - whether the caller can speak on the conference. If this attribute is set to 'true',\n\t\tthe participant will only be able to listen to people on the conference. Defaults to 'false'.\n\t- `beep` - whether a notification beep is played to the conference when a participant joins or\n\t\tleaves the conference. Defaults to true.\n\t- `startConferenceOnEnter` - tells a conference to start when this participant joins the conference,\n\t\tif it is not already started. Defaults to true. If this is false and the participant joins a\n\t\tconference that has not started, they are muted and hear background music until a participant\n\t\tjoins where `startConferenceOnEnter` is true.\n\t- `endConferenceOnExit` - ends the conference when this caller leaves, causing all other participants\n\t\tin the conference to drop out. Defaults to false.\n\t- `waitUrl` - a URL for music that plays before the conference has started. The URL may be an MP3,\n\t\ta WAV or a TwiML document that uses <Play> or <Say> for content. Defaults to\n\t\t'http://twimlets.com/holdmusic?Bucket=com.twilio.music.classical'. For more information,\n\t\tview the [Twilio Documentation]\n\t\t(http://www.twilio.com/docs/api/twiml/conference#attributes-waitUrl)\n\t- `waitMethod` - indicates which HTTP method to use when requesting 'waitUrl'. Defaults to 'POST'.\n\t\tBe sure to use 'GET' if you are directly requesting static audio files such as WAV or MP3 files\n\t\tso that Twilio properly caches the files.\n\t- `maxParticipants` - the maximum number of participants you want to allow within a named conference\n\t\troom. The default maximum number of participants is 40. The value must be a positive integer\n\t\tless than or equal to 40.\n - `Call.dial` - Not implemented, and probably will never be implemented.\n\t- You can use `Call.joinConference` to join a conference room.\n\t- You can use `Application.makeCall` to call other participants and tell them all to join a\n\t\tconference room.  This is the recommended way to bridge calls, for example.\n - `Call.putOnHold([options])` - A special case of `Call.joinConference`.  The call is placed into a\n\trandom, empty conference room with the specified hold music. The conference room name is returned.\n\tOptions include:\n\t\t- `timeLimit` - see `Call.joinConference()` above\n\t\t- `beep` - whether a notification beep is played to the conference when a participant joins or\n\t\tleaves the conference. Defaults to **false**. Note: this default is intentionally different from\n\t\t`Call.joinConference`\n\t\t- `waitUrl` - see `Call.joinConference()` above\n\t\t- `waitMethod` - see `Call.joinConference()` above\n- `Call.putOnHoldWithoutMusic([options])` - A special case of `Call.joinConference`.  The call is placed into a\n\trandom, empty conference room with no hold music. The conference room name is returned.\n\tOptions include:\n\t\t- `timeLimit` - see `Call.joinConference()` above\n\t\t- `beep` - whether a notification beep is played to the conference when a participant joins or\n\t\tleaves the conference. Defaults to **false**. Note: this default is intentionally different from\n\t\t`Call.joinConference`\n - `Call.hangup()` - Ends a call. If used as the first verb in a TwiML response it does not prevent\n\tTwilio from answering the call and billing your account.\n - `Call.redirect(url, method)` - Transfers control of a call to the TwiML at a different URL.\n\tAll verbs after &lt;Redirect&gt; are unreachable and ignored. Twilio will request a new TwiML document\n\tfrom `url` using the HTTP `method` provided.\n - `Call.reject([reason])` - rejects an incoming call to your Twilio number without billing you. This\n\tis very useful for blocking unwanted calls. **If and only if the first verb in a TwiML document is\n\t&lt;Reject&gt;,\tTwilio will not pick up the call. This means `Call.reject()` must be called before any\n\tother TwiML-generating function. You cannot `Call.say()` and then `Call.reject()`**\n\tThe call ends with a status of 'no-answer' or 'busy', depending on the `reason` provided.\n\t**Any verbs after &lt;Reject&gt; are unreachable and ignored.**\n\tPossible `reason`s include: 'rejected', 'busy' (default: 'rejected')\n - `Call.cb(cb)` - When reached, Twilio will use the &lt;Redirect&gt; verb to re-route control to the\n\tspecified callback function, `cb`. The `cb` will be passed the Call object. This is useful if you\n\twant to loop like this:\n\n\t```javascript\n\t(function getInput() {\n\t\tcall.gather(function(call, digits) {\n\t\t\t//Input received\n\t\t}).say(\"Please press 1, 2, or 3.\");\n\t\tcall.cb(getInput); //Loop until we get input\n\t})();\n\t```\n\n#### <a name=\"callEvents\"></a>Call Events\n\nThe following Call events are only emitted if the Call is associated with a registered Application.\nSee `app.register()` for more details.\n\n- Event: 'connected' `function(status) {}` - Emitted when the call connects. For outbound calls,\n\tthis event is only emitted when the callee answers the call. Use the 'ended' event below to\n\tdetermine why a call was not answered. For further information, refer to the\n\t[Twilio Documentation]\n\t(http://www.twilio.com/docs/api/twiml/twilio_request#request-parameters-call-status)\n\tfor possible call status values.\n\t*EDIT:* I think the only possible call status value is 'in-progress'. See issue #3.\n\t\n\tNote: As described above, one must take care when using asynchronous function calls\n\twithin the 'connected' event handler, as the callbacks for these async calls will be\n\texecuted *after* the TwiML has already been submitted to Twilio. See [Common Pitfalls]\n\t(https://github.com/bminer/node-twilio-api/wiki/Common-Pitfalls) for details.\n- Event: 'ended' `function(status, callDuration) {}` - Emitted when the call ends for whatever\n\treason. For outbound calls, one can use this event to see why the call never connected\n\t(i.e. the person did not answer, the line was busy, etc.) See the [Twilio Documentation]\n\t(http://www.twilio.com/docs/api/twiml/twilio_request#request-parameters-call-status)\n\tfor possible call status values.\n\t*EDIT:* I believe the only possible call status values are: `['completed', 'busy',\n\t'failed', 'no-answer', 'canceled']`. See issue #3.\n\n#### <a name=\"appEvents\"></a>Application Events\n\n- Event: 'outgoingCall' `function(call) {}` - Emitted when Twilio connects an outgoing call\n\tplaced with `Application.makeCall()`. It is not common to listen for this event.\n- <a name=\"incomingCallEvent\"></a>Event: 'incomingCall' `function(call) {}` - Emitted when the\n\tTwilio middleware receives a voice request from Twilio. Once you have the Call Object, you\n\tcan [generate a TwiML response](#generatingTwiML) or listen for Call events.\n- Event: 'outgoingSMSMessage' `function(smsMessage) {}` - Emitted when Twilio sends an outgoing\n\tSMS message sent with `Application.sendSMS()`. It is not common to listen for this event.\n- <a name=\"incomingSMSMessageEvent\"></a>Event: 'incomingSMSMessage' `function(smsMessage) {}` -\n\tEmitted when the Twilio middleware receives a SMS message request from Twilio.\n\n#### Send SMS Messages\n\n- `Application.sendSMS(from, to, body [, cb])` - Send a SMS Message to a SMS-enabled phone.\n\tIf your application is registered, but your SmsStatusCallbackUrl is not set to the same server,\n\tthe SMSMessage Object will not emit the 'sendStatus' event. For example, if your server\n\tis running at www.example.com, please ensure that your\n\tSmsStatusCallbackUrl is something like: http://www.example.com/twilio/smsStatus\n\tAlso, be sure that your SmsStatusCallbackUrl protocol matches your protocol (HTTP vs. HTTPS).\n\t\n`from` - A Twilio phone number enabled for SMS. Only phone numbers or short codes purchased from\n\tTwilio work here.\n\n`to` - the destination phone number.\n\n`body` - the body of the message you want to send, limited to 160 characters.\n\n`cb` - Callback of the form `cb(err, smsMessage)`. This is called as soon as the message is\n\tqueued to be sent, *not when the message is actually sent/delivered*. To check the message's\n\tsend status, you can listen for the 'sendStatus' event on the SMSMessage Object.\n\nPhone numbers should be formatted with a '+' and country code e.g., +16175551212 (E.164 format).\n\n#### List and Manage SMS Messages\n\n- `Application.listSMSMessages([filters,] cb)` - Lists inbound and outbound SMS Messages associated\n\twith an Account. Note: you must call Application.listSMSMessages, not Account.listSMSMessages.\n\tThis is a side-effect caused by the Application and SMS Message being very inter-related.\n\tRefer to the [Twilio Documentation](http://www.twilio.com/docs/api/rest/sms#list-get) to see\n\twhat `filters` you can use. Callback is of the form: `cb(err, li)`.\n- `SMSMessage.load([cb])`\n- `SMSMessage.reply(body [, cb])` - Calls `Application.sendSMS(this.To, this.From, body, cb)`\n\tinternally. This method will not work from outbound SMS Messages.\n- Useful SMS Properties include:\n\t- From - The phone number that sent this message\n\t- To - The phone number of the recipient\n\t- Body - The text body of the SMS message. Up to 160 characters long\n\t- Status - The status of this SMS message. Either queued, sending, sent, or failed.\n\t- Direction - The direction of this SMS message. 'incoming' for incoming messages,\n\t\t'outbound-api' for messages initiated via the REST API, 'outbound-call' for messages\n\t\tinitiated during a call or 'outbound-reply' for messages initiated in response to an\n\t\tincoming SMS. At this time, node-twilio-api does not support 'outbound-call' or\n\t\t'outbound-reply'; all outbound SMS messages are marked 'outbound-api'.\n\t- Dates (i.e. DateCreated, DateSent)\n\t- Geographic information (i.e. FromCity, FromState, ..., ToZip, ToCountry)\n\t- Any others: http://www.twilio.com/docs/api/twiml/sms/twilio_request#synchronous\n\n#### SMS Message Events\n\n- Event: 'sendStatus' `function(success, status) {}` - Emitted when an outbound SMS message has been\n\tprocessed.  Success is either true or false; status is either \"sent\" or \"failed\".\n\n#### <a name=\"listIterator\"></a>ListIterator\n\nA ListIterator Object is returned when Twilio reponses may be large. For example, if one were to list\nall subaccounts, the list might be relatively lengthy.  For these responses, Twilio returns 20 or so\nitems in the list and allows us to access the rest of the list with another API call.  To simplify this\nprocess, any API call that would normally return a list returns a ListIterator Object instead.\n\nThe ListIterator Object has several properties and methods:\n\n- `Page` - A property of the ListIterator that tells you which page is loaded at this time\n- `NumPages` - The number of pages in the resultset\n- `PageSize` - The number of results per page (this can be changed and the default is 20)\n- `Results` - The array of results. If results are a list of accounts, this will be an array of Account\n\tObjects, if it's a list of applications, this will be an array of Application Objects, etc.\n- `nextPage([cb])` - Requests that the next page of results be loaded. Callback is of the form\n\t`cb(err, li)`\n- `prevPage([cb])` - Requests that the previous page of results be loaded.\n\n## Testing\n\ntwilio-api uses [nodeunit](https://github.com/caolan/nodeunit) right now for testing. To test the package,\nrun `npm test` in the root directory of the repository.\n\n**BEWARE:** Running the test suite *may* actually place calls and cause you to incur fees on your Twilio\naccount. Please look through the test suite before running it.\n\n## Disclaimer\n\nBlake Miner is not affliated with Twilio, Inc. in any way.\nUse this software AT YOUR OWN RISK. See LICENSE for more details.\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/bminer/node-twilio-api/issues"
  },
  "_id": "twilio-api@0.3.3",
  "dist": {
    "shasum": "f6b68d7eb6c642b2cd53cf20c561702ec1a9c339"
  },
  "_from": "twilio-api@",
  "_resolved": "https://registry.npmjs.org/twilio-api/-/twilio-api-0.3.3.tgz"
}
